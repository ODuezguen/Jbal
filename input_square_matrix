This function takes a matrix as input and returns a new matrix that has all of the original columns 
plus additional columns containing the squares of the values in the original columns. 
The new columns are added only for columns that have more than two unique values in the original matrix.

input_square_matrix <- function(input_matrix) {
  indices <- which(sapply(input_matrix, function(x) length(unique(x)) > 2))
  square_matrix <- input_matrix[, indices]^2
  colnames(square_matrix) <- paste0(colnames(input_matrix)[indices], ".2")
  out <- cbind(input_matrix, square_matrix)
  return(out)
}
